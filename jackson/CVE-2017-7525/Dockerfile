FROM vulhub/java:7u21-jdk

LABEL MAINTAINER="b1ngz <blinking.yan@gmail.com>"

COPY . /usr/src

RUN set -ex \
    && mkdir -p /opt/maven \
    && wget -qO- http://mirrors.hust.edu.cn/apache/maven/maven-3/3.5.4/binaries/apache-maven-3.5.4-bin.tar.gz | tar zx -C /opt/maven --strip-components=1 \
    && update-alternatives --install /usr/bin/mvn java /opt/maven/bin/mvn 100 \
    && cd /usr/src \
    && mvn -U clean package -Dmaven.test.skip=true

EXPOSE 8080

CMD ["java", "-jar", "/usr/src/target/jackson.jar"]